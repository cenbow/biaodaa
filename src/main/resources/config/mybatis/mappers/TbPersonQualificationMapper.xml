<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.silita.biaodaa.dao.TbPersonQualificationMapper" >
  <!-- 获取企业人员资质的注册类别-->
  <select id="getCompanyPersonCate" parameterType="Map" resultType="Map">
    select category,count(*) as num from tb_person_qualification where  1=1 and `type`=1
    <if test="comId!=null and comId!=''">
      and com_id =#{comId}
    </if>
    <if test="comName!=null and comName!=''">
      and com_name=#{comName}
    </if>
    GROUP BY category
  </select>

  <!-- 获取企业注册人员-->
  <select id="queryCompanyPerson" parameterType="Map" resultType="com.silita.biaodaa.model.TbPersonQualification">
    select q.* from tb_person_qualification q where 1=1 and q.type=1
    <if test="comId!=null and comId!=''">
      and q.com_id = #{comId}
    </if>
    <if test="comName!=null and comName!=''">
      and q.com_name = #{comName}
    </if>
    <if test="category!=null and category!=''">
      and q.category = #{category}
    </if>
    <if test="keyWord!=null and keyWord!=''">
      and q.name like CONCAT('%',#{keyWord},'%')
    </if>
    ORDER BY q.`valid_date` DESC
  </select>





</mapper>